<!DOCTYPE html>
<html>
    <head>
        <title>Rich-Gureckis_Replicability</title>
        <!-- jsPsych materials/plugins-->
        <script src="jspsych-6.3.1/jspsych.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-animation.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-html-button-response.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-survey-text.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-survey-multi-select.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-fullscreen.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-survey-multi-choice.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-image-button-response.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-preload.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-survey-multi-choice.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-instructions.js"></script>
        <link rel="stylesheet" href="jspsych-6.3.1/css/jspsych.css" type="text/css">
        <link rel="stylesheet" href="style.css" type="text/css">
        <link rel="shortcut icon" type="image/png" href="materials/bee-favicon.png"/>

        <script type="text/javascript" src="materials/bees.js"></script>
        <script type="text/javascript" src="modules/group_assignment.js"></script>
        <script src="js/serverComm.js" type="text/javascript"></script>

        <!-- Experiment modules -->
        <script type="text/javascript" src="modules/welcome.js"></script>
        <script type="text/javascript" src="modules/instructions.js"></script>
        <script type="text/javascript" src="modules/test.js"></script>
        <script type="text/javascript" src="modules/post_questionnaire.js"></script>

    </head>
    <body>
      <div id="header">
        <div id="logo-wrapper">
          <img src="materials/VC_logo.png" alt="Vassar Logo" id="vclogo">
          <h3 id="logotext">Vassar College Cognitive Science</h3>
        </div>
        <div id="trial-info">
          <p><span class="trial-info-title">Trial: </span> <span id="trial-number">1/64</span></p>
          <p id="bonus-tracker"><span class="trial-info-title">Current Bonus: </span><span id="bonus-value">$0.40</span></p>
        </div>
      </div>
      <div id="jspsych-target"></div>
    </body>
    <script>


      /* Took out old 'demo mode' code that displayed condition assignment in header.
      // var condition = document.getElementById('condition_asmt');
      // condition_asmt.innerHTML = condition_assignment;
      */

      var CONDITION = 0;

      create_condition_assignment(CONDITION);

      createBeeTrials();
    
        var timeline = [];
        var bonus_pay = 0.40;

        // enter fullscreen mode
        timeline.push({
          type: 'fullscreen',
          fullscreen_mode: true,
          on_start: () => {
              console.log(condition_assignment)
            },
        });

        var preload = {
            type: 'preload',
            images: () => {
              var img = [];
              // BEE IMAGES
              for (const i in BEES) {
                img.push(BEES[i].image);
              }

              // OTHER IMAGES
              img.push('materials/instrlegs.png')
              img.push('materials/instrwings.png')
              img.push('materials/instrstripes.png')
              img.push('materials/instrantennae.png')
              img.push('materials/instr_outcomes_fullinfo.png');
              img.push('materials/instr_outcomes_standard.png');
              img.push('materials/instr_outcomes_test.png');
              return img;
            },
            max_load_time: 30000,
            message: 'Please wait while the experiment loads',
            error_message: 'The experiment failed to load. Please contact the researcher.',
        };

        timeline.push(preload);
        timeline.push(welcome_screen);
        timeline.push(instructions_sequence);
        timeline.push(practice_trial);
        timeline.push(mid_point_screen);
        timeline.push(actual_trial);
        timeline.push(post_questionnaire);

        // exit fullscreen mode
        timeline.push({
          type: 'fullscreen',
          fullscreen_mode: false
        });

        jsPsych.init({
          timeline: timeline,
          display_element: 'jspsych-target',
          // default_iti: 400, 
          // exclusions: {
          //   min_width: 800,
          //   min_height: 600},
          on_finish: function() {
              jsPsych.data.displayData();
          }
        });
        
    </script>
</html>
